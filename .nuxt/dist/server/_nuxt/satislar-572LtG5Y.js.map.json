{"file":"satislar-572LtG5Y.js","mappings":";;;;;;;;;;;;;;;;;;;;AAqEA,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,UAAU,IAAI;AAAA,MAClB,gBAAgB;AAAA,MAChB,cAAc;AAAA,MACd,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,YAAY;AAAA,MACZ,iBAAiB,CAAE;AAAA,MACnB,eAAe;AAAA,MACf,oBAAoB;AAAA,MACpB,oBAAoB;AAAA,MACpB,mBAAmB;AAAA,IACrB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/satislar.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h1 class=\"page-title\">Sales Management</h1>\n\n    <!-- Sales List Table -->\n    <table class=\"sales-table\" v-if=\"sales.length\">\n      <thead>\n        <tr>\n          <th>Sale Number</th>\n          <th>Date</th>\n          <th>Customer</th>\n          <th>License Plate</th>\n          <th>Products</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"sale in sales\" :key=\"sale.satis_numarasi\">\n          <td>{{ sale.satis_numarasi }}</td>\n          <td>{{ sale.satis_tarihi }}</td>\n          <td>{{ sale.satis_müsteri_adi }}</td>\n          <td>{{ sale.satis_plakasi }}</td>\n          <td>{{ sale.satilan_ürünler?.join(', ') ?? '' }}</td>\n          <td><button @click=\"removeSale(sale.satis_numarasi)\" class=\"btn-remove\">Remove</button></td>\n        </tr>\n      </tbody>\n    </table>\n    <p v-else>No sales found.</p>\n\n    <!-- Add Sale Section -->\n    <div class=\"add-sale-section\">\n      <h2>Add New Sale</h2>\n      <div class=\"input-grid\">\n        <div class=\"input-group\">\n          <label>Sale Number:</label>\n          <input v-model=\"newSale.satis_numarasi\" type=\"text\" required />\n        </div>\n\n        <div class=\"input-group\">\n          <label>Sale Date (YYYY-MM-DD):</label>\n          <input v-model=\"newSale.satis_tarihi\" type=\"date\" required />\n        </div>\n\n        <div class=\"input-group\">\n          <label>Customer Name:</label>\n          <input v-model=\"newSale.satis_müsteri_adi\" type=\"text\" required />\n        </div>\n\n        <div class=\"input-group\">\n          <label>Car Plate:</label>\n          <input v-model=\"newSale.satis_plakasi\" type=\"text\" required />\n        </div>\n\n        <div class=\"input-group\">\n          <label>Products Sold (comma separated):</label>\n          <input v-model=\"newSale.satilan_ürünler\" type=\"text\" placeholder=\"e.g., 1,2,3\" />\n        </div>\n\n        <button @click=\"addSale\" class=\"btn-add\">Add Sale</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useFetch } from '#app'\n\n// States for sales data and new sale input\nconst sales = ref([])\nconst newSale = ref({\n  satis_numarasi: '',\n  satis_tarihi: '',\n  satis_yili: '',\n  satis_ayi: '',\n  satis_günü: '',\n  satilan_ürünler: [],\n  satis_plakasi: '',\n  satis_iptal_edildi: false,\n  satis_iptal_tarihi: null,\n  satis_müsteri_adi: ''\n})\n\n// Fetch sales data on page load\nconst fetchSales = async () => {\n  console.log(\"fetch sales\")\n  const sellsResponse = await fetch('/api/sells');\n\n  if (sellsResponse.ok) {\n    sales.value = await sellsResponse.json() || [];\n    console.log(\"sales: \", sales.value)\n  }\n}\n\n// Add a new sale\nconst addSale = async () => {\n  // Split the products sold input string into an array\n  newSale.value.satilan_ürünler = newSale.value.satilan_ürünler\n    .split(',')\n    .map(product => product.trim()) // Trim whitespace around each product\n\n  const satis_tarihi = newSale.value.satis_tarihi\n  const [year, month, day] = satis_tarihi.split('-')\n  newSale.value.satis_yili = year\n  newSale.value.satis_ayi = month\n  newSale.value.satis_günü = day\n\n  await $fetch('/api/sells', {\n    method: 'POST',\n    body: newSale.value\n  })\n\n  await fetchSales()\n\n  // Reset newSale object\n  newSale.value = {\n    satis_numarasi: '',\n    satis_tarihi: '',\n    satis_yili: '',\n    satis_ayi: '',\n    satis_günü: '',\n    satilan_ürünler: [],\n    satis_plakasi: '',\n    satis_iptal_edildi: false,\n    satis_iptal_tarihi: null,\n    satis_müsteri_adi: ''\n  }\n}\n\n// Remove a sale by satis_numarasi\nconst removeSale = async (saleNumber) => {\n  sales.value = sales.value.filter(sale => sale.satis_numarasi !== saleNumber)\n\n  console.log(\"removeSale sales.value: \", sales.value)\n\n  await $fetch('/api/sells', {\n    method: 'POST',\n    body: sales.value\n  })\n\n  await fetchSales()\n}\n\nonMounted(async () => {\n  try {\n    // Initialize fetch on mounted\n    fetchSales();\n  } catch (error) {\n    showError.value = true;\n    errorMessage.value = 'Ürün verileri yüklenemedi.';\n  }\n});\n</script>\n\n<style scoped>\n.container {\n  max-width: 900px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.page-title {\n  text-align: center;\n  margin-bottom: 30px;\n  font-size: 24px;\n  color: #333;\n}\n\n.sales-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 40px;\n}\n\n.sales-table th, .sales-table td {\n  border: 1px solid #ddd;\n  padding: 10px;\n}\n\n.sales-table th {\n  background-color: #f5f5f5;\n  text-align: left;\n  font-weight: bold;\n}\n\n.sales-table tr:nth-child(even) {\n  background-color: #f9f9f9;\n}\n\n.sales-table tr:hover {\n  background-color: #e1e1e1;\n}\n\n.btn-remove {\n  background-color: #ff4d4d;\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  cursor: pointer;\n}\n\n.btn-remove:hover {\n  background-color: #d43d3d;\n}\n\n.add-sale-section {\n  margin-top: 40px;\n}\n\nh2 {\n  font-size: 20px;\n  margin-bottom: 20px;\n}\n\n.input-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 20px;\n}\n\n.input-group {\n  display: flex;\n  flex-direction: column;\n}\n\ninput[type=\"text\"], input[type=\"date\"] {\n  padding: 10px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  margin-top: 5px;\n}\n\n.btn-add {\n  grid-column: 1 / -1;\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  padding: 10px;\n  cursor: pointer;\n  text-align: center;\n  margin-top: 20px;\n}\n\n.btn-add:hover {\n  background-color: #45a049;\n}\n</style>\n"],"version":3}