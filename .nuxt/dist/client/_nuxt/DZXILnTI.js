import{_ as Q,E as G}from"./DPSFwcM6.js";import{_ as H,r as n,m as A,n as J,c,a as s,b as E,w as T,p as k,v as h,u as l,t as o,q as m,s as W,x as X,F as $,y as Z,o as i,z,A as aa,d as D}from"./DbyeV-U8.js";import{C as ea}from"./C6ARNwx9.js";const sa={class:"add-car-section"},ta={key:0,class:"success-message"},la=["onClick"],ra={class:"table-row",title:"Arac biligilerini göstermek icin tikla"},na={class:"arrow-wrapper"},oa={class:"row-element-first arrow"},ia={class:"row-element"},ua=["onClick"],da={key:0,class:"details-row"},ca={colspan:"1"},va={class:"buttons"},ma={__name:"araclar",setup(pa){const u=n([]),r=n({arac_id:"",arac_sahibi:"",adres:"",arac_markasi:""}),f=n(""),y=n(null),p=n(!1),w=n(null),g=n(""),L=n(10),_=n(1),v=n(!1),b=n(""),B=e=>{y.value=y.value===e?null:e},U=()=>{v.value=!1},S=A(()=>u.value.filter(e=>{var d,t,C,M,x;const a=g.value.toLowerCase();return((d=e==null?void 0:e.arac_id)==null?void 0:d.toLowerCase().includes(a))||((t=e==null?void 0:e.arac_sahibi)==null?void 0:t.toLowerCase().includes(a))||((C=e==null?void 0:e.adres)==null?void 0:C.toLowerCase().includes(a))||((M=e==null?void 0:e.arac_markasi)==null?void 0:M.toLowerCase().includes(a))||((x=e==null?void 0:e.kayit_tarihi)==null?void 0:x.toLowerCase().includes(a))})),F=A(()=>{const a=_.value*L.value;return S.value.slice(0,a)}),K=A(()=>_.value*L.value<S.value.length),N=A(()=>_.value!==1),P=()=>{_.value++},Y=()=>{_.value--},I=()=>{const e=new Date,a=e.getFullYear(),d=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${a}-${d}-${t}`},V=async()=>{try{await $fetch("/api/cars",{method:"POST",body:u.value})}catch{v.value=!0,b.value="Veritabanı güncellenemedi"}},O=async()=>{if(!r.value.arac_id||!r.value.arac_sahibi||!r.value.adres||!r.value.arac_markasi){v.value=!0,b.value="Lütfen tüm alanları doldurun";return}u.value.unshift({...r.value,kayit_tarihi:I()}),await V(),f.value="Yeni arac (plakasi: "+r.value.arac_id+") başarıyla eklendi ve kaydedildi!",setTimeout(()=>{f.value=""},6e4),r.value={arac_id:"",arac_sahibi:"",adres:"",arac_markasi:""}},R=e=>{w.value=e,p.value=!0},j=()=>{p.value=!1,w.value=null},q=()=>{u.value=u.value.filter(e=>e.arac_id!==w.value),p.value=!1,w.value=null,V()};return J(async()=>{try{const e=await fetch("/api/cars");e.ok&&(u.value=await e.json())}catch{v.value=!0,b.value="arac verlieri yüklenemedi."}}),(e,a)=>{const d=Q;return i(),c("div",null,[a[11]||(a[11]=s("h1",null,"Araclar",-1)),E(d,null,{default:T(()=>[l(p)?(i(),z(ea,{key:0,showModal:l(p),title:"Aracı Sil",message:"Bu aracı silmek istediğinize emin misiniz?",onConfirm:q,onCancel:j},null,8,["showModal"])):m("",!0)]),_:1}),s("div",sa,[a[6]||(a[6]=s("h3",null,"Yeni Arac Ekle",-1)),k(s("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>l(r).arac_id=t),placeholder:"Arac plakasi"},null,512),[[h,l(r).arac_id]]),k(s("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>l(r).arac_sahibi=t),placeholder:"Arac Sahibi"},null,512),[[h,l(r).arac_sahibi]]),k(s("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>l(r).adres=t),placeholder:"Adres"},null,512),[[h,l(r).adres]]),k(s("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>l(r).arac_markasi=t),placeholder:"Arac Markası"},null,512),[[h,l(r).arac_markasi]]),s("button",{onClick:O},"Arac Ekle")]),l(f)?(i(),c("p",ta,o(l(f)),1)):m("",!0),a[12]||(a[12]=s("h3",null,"Arac Listesi",-1)),k(s("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>W(g)?g.value=t:null),placeholder:"Arac plakasi, arac sahibi, arac markasi, adres, tarih ara",onKeyup:a[5]||(a[5]=X((...t)=>e.submitSearch&&e.submitSearch(...t),["enter"])),class:"search-input"},null,544),[[h,l(g)]]),s("table",null,[s("thead",null,[s("tr",null,[s("th",null,"Kayitli arac listesi. ("+o(l(u).length)+" kayitli arac blunmaktadir) - Filtrelenen arac sayisi: "+o(l(S).length)+": ",1)])]),s("tbody",null,[(i(!0),c($,null,Z(l(F),(t,C)=>(i(),c($,{key:C},[s("tr",{onClick:M=>B(t.arac_id)},[s("td",ra,[s("div",na,[s("span",oa,o(l(y)===t.arac_id?"↑":"↓"),1)]),s("span",ia,o(t.arac_id),1),s("button",{class:"row-element row-element-last remove-button",onClick:aa(M=>R(t.arac_id),["stop"])},"Araci Sil",8,ua)])],8,la),l(y)===t.arac_id?(i(),c("tr",da,[s("td",ca,[s("div",null,[s("p",null,[a[7]||(a[7]=s("strong",null,"Arac Sahibi:",-1)),D(" "+o(t.arac_sahibi),1)]),s("p",null,[a[8]||(a[8]=s("strong",null,"Adres:",-1)),D(" "+o(t.adres),1)]),s("p",null,[a[9]||(a[9]=s("strong",null,"Kayıt Tarihi:",-1)),D(" "+o(t.kayit_tarihi),1)]),s("p",null,[a[10]||(a[10]=s("strong",null,"Arac Markası:",-1)),D(" "+o(t.arac_markasi),1)])])])])):m("",!0)],64))),128))])]),s("div",va,[s("div",null,[l(K)?(i(),c("button",{key:0,onClick:P,class:"load-more-btn"}," Daha fazla arac göster ")):m("",!0),l(N)?(i(),c("button",{key:1,onClick:Y,class:"load-less-btn"}," Daha az arac göster ")):m("",!0)])]),E(d,null,{default:T(()=>[l(v)?(i(),z(G,{key:0,showModal:l(v),errorMessage:l(b),onClose:U},null,8,["showModal","errorMessage"])):m("",!0)]),_:1})])}}},fa=H(ma,[["__scopeId","data-v-a2ff69ec"]]);export{fa as default};
