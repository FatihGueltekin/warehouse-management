import{_ as c,r as m,n as f,C as h,c as n,a as s,F as b,y as k,p as u,v as o,o as r,t as d}from"./DbyeV-U8.js";const S={class:"container"},w={key:0,class:"sales-table"},x=["onClick"],C={key:1},D={class:"add-sale-section"},M={class:"input-grid"},N={class:"input-group"},P={class:"input-group"},V={class:"input-group"},U={class:"input-group"},q={class:"input-group"},Y={__name:"satislar",setup(A){const e=m([]),l=m({satis_numarasi:"",satis_tarihi:"",satis_yili:"",satis_ayi:"",satis_günü:"",satilan_ürünler:[],satis_plakasi:"",satis_iptal_edildi:!1,satis_iptal_tarihi:null,satis_müsteri_adi:""}),p=async()=>{console.log("fetch sales");const i=await fetch("/api/sells");i.ok&&(e.value=await i.json()||[],console.log("sales: ",e.value))},y=async()=>{l.value.satilan_ürünler=l.value.satilan_ürünler.split(",").map(v=>v.trim());const i=l.value.satis_tarihi,[a,t,_]=i.split("-");l.value.satis_yili=a,l.value.satis_ayi=t,l.value.satis_günü=_,await $fetch("/api/sells",{method:"POST",body:l.value}),await p(),l.value={satis_numarasi:"",satis_tarihi:"",satis_yili:"",satis_ayi:"",satis_günü:"",satilan_ürünler:[],satis_plakasi:"",satis_iptal_edildi:!1,satis_iptal_tarihi:null,satis_müsteri_adi:""}},g=async i=>{e.value=e.value.filter(a=>a.satis_numarasi!==i),console.log("removeSale sales.value: ",e.value),await $fetch("/api/sells",{method:"POST",body:e.value}),await p()};return f(async()=>{try{p()}catch{h.value=!0,errorMessage.value="Ürün verileri yüklenemedi."}}),(i,a)=>(r(),n("div",S,[a[12]||(a[12]=s("h1",{class:"page-title"},"Sales Management",-1)),e.value.length?(r(),n("table",w,[a[5]||(a[5]=s("thead",null,[s("tr",null,[s("th",null,"Sale Number"),s("th",null,"Date"),s("th",null,"Customer"),s("th",null,"License Plate"),s("th",null,"Products"),s("th",null,"Actions")])],-1)),s("tbody",null,[(r(!0),n(b,null,k(e.value,t=>{var _;return r(),n("tr",{key:t.satis_numarasi},[s("td",null,d(t.satis_numarasi),1),s("td",null,d(t.satis_tarihi),1),s("td",null,d(t.satis_müsteri_adi),1),s("td",null,d(t.satis_plakasi),1),s("td",null,d(((_=t.satilan_ürünler)==null?void 0:_.join(", "))??""),1),s("td",null,[s("button",{onClick:v=>g(t.satis_numarasi),class:"btn-remove"},"Remove",8,x)])])}),128))])])):(r(),n("p",C,"No sales found.")),s("div",D,[a[11]||(a[11]=s("h2",null,"Add New Sale",-1)),s("div",M,[s("div",N,[a[6]||(a[6]=s("label",null,"Sale Number:",-1)),u(s("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.satis_numarasi=t),type:"text",required:""},null,512),[[o,l.value.satis_numarasi]])]),s("div",P,[a[7]||(a[7]=s("label",null,"Sale Date (YYYY-MM-DD):",-1)),u(s("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.satis_tarihi=t),type:"date",required:""},null,512),[[o,l.value.satis_tarihi]])]),s("div",V,[a[8]||(a[8]=s("label",null,"Customer Name:",-1)),u(s("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.satis_müsteri_adi=t),type:"text",required:""},null,512),[[o,l.value.satis_müsteri_adi]])]),s("div",U,[a[9]||(a[9]=s("label",null,"Car Plate:",-1)),u(s("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.satis_plakasi=t),type:"text",required:""},null,512),[[o,l.value.satis_plakasi]])]),s("div",q,[a[10]||(a[10]=s("label",null,"Products Sold (comma separated):",-1)),u(s("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.satilan_ürünler=t),type:"text",placeholder:"e.g., 1,2,3"},null,512),[[o,l.value.satilan_ürünler]])]),s("button",{onClick:y,class:"btn-add"},"Add Sale")])])]))}},T=c(Y,[["__scopeId","data-v-fa6f2156"]]);export{T as default};
