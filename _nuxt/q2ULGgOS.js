import{_ as ee,E as ne}from"./C9fJB6zg.js";import{_ as ae,r as s,m as D,n as te,c as m,a,b as x,w as z,p as k,v as f,t as i,q as c,x as le,F as U,y as se,o as u,z as $,A as re,d as P}from"./D6sDdDbY.js";import{C as K}from"./Bo0QLuxF.js";const ie={class:"add-product-section"},oe={key:0,class:"success-message"},ue=["onClick"],de={class:"table-row",title:"Ürün bilgilerini göstermek için tıkla"},ve={class:"arrow-wrapper"},me={class:"row-element-first arrow"},ce={class:"row-element"},_e={class:"row-element"},ke={class:"row-element"},fe={class:"row-element"},ye=["onClick"],ge={key:0,class:"details-row"},he={colspan:"1"},pe={class:"stock-adjustment"},we=["onClick"],Ce=["onClick"],be={class:"buttons"},Me={__name:"urunler",setup(Se){const o=s([]),l=s({ürün_numarasi:"",ürün_ismi:"",ürün_fiyati:"",ürün_adedi:""}),p=s(""),w=s(null),_=s(!1),y=s(!1),C=s(null),b=s(null),E=s(0),M=s(null),L=s(""),B=s(10),g=s(1),v=s(!1),h=s("");s([]);const A=e=>{w.value=w.value===e?null:e},N=()=>{v.value=!1},V=D(()=>o.value.filter(e=>{var r,t,S,d;const n=L.value.toLowerCase();return((r=e==null?void 0:e.ürün_numarasi)==null?void 0:r.toLowerCase().includes(n))||((t=e==null?void 0:e.ürün_ismi)==null?void 0:t.toLowerCase().includes(n))||((S=e==null?void 0:e.ürün_kayit_tarihi)==null?void 0:S.toLowerCase().includes(n))||((d=e==null?void 0:e.ürün_fiyati)==null?void 0:d.toString().toLowerCase().includes(n))})),I=D(()=>{const n=g.value*B.value;return V.value.slice(0,n)}),Y=D(()=>g.value*B.value<V.value.length),j=D(()=>g.value!==1),O=()=>{g.value++},q=()=>{g.value--},F=()=>{const e=new Date,n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${t}`},T=async()=>{try{await $fetch("/api/parts",{method:"POST",body:o.value})}catch{v.value=!0,h.value="Veritabanı güncellenemedi"}},Q=async()=>{if(!l.value.ürün_numarasi||!l.value.ürün_ismi||!l.value.ürün_fiyati||!l.value.ürün_adedi){v.value=!0,h.value="Lütfen tüm alanları doldurun";return}if(o.value.some(e=>e.ürün_numarasi===l.value.ürün_numarasi)){v.value=!0,h.value="Bu ürün numarasi kullanilmaktadir "+l.value.ürün_numarasi+". Kullanilmayan bir ürün numarasi girin.";return}console.log("getCurrentDate(): ",F()),o.value.unshift({ürün_numarasi:l.value.ürün_numarasi,ürün_ismi:l.value.ürün_ismi,ürün_fiyati:parseFloat(l.value.ürün_fiyati).toFixed(2),ürün_adedi:parseInt(l.value.ürün_adedi,10),ürün_kayit_tarihi:F()}),console.log("prodocuts: ",o.value[0]),await T(),p.value="Yeni ürün (Ürün numarasi: "+l.value.ürün_numarasi+") başarıyla eklendi ve kaydedildi!",setTimeout(()=>{p.value=""},6e4),l.value={ürün_numarasi:"",ürün_ismi:"",ürün_fiyati:"",ürün_adedi:""}},R=e=>{M.value=e,_.value=!0},G=()=>{_.value=!1,M.value=null},H=()=>{const e=o.value.find(t=>t.ürün_numarasi===b.value);if(!e)return;const{ürün_adedi:n}=e,r=E.value;C.value==="increase"?e.ürün_adedi+=r:C.value==="decrease"&&(e.ürün_adedi=Math.max(0,n-r)),T(),y.value=!1},J=()=>{_.value=!1,b.value=null},W=()=>{o.value=o.value.filter(e=>e.ürün_numarasi!==M.value),_.value=!1,M.value=null,T()},X=e=>{b.value=e,y.value=!0,C.value="increase"},Z=e=>{b.value=e,y.value=!0,C.value="decrease"};return te(async()=>{try{const e=await fetch("/api/parts");e.ok&&(o.value=await e.json(),o.value.sort((n,r)=>n.ürün_numarasi-r.ürün_numarasi))}catch{v.value=!0,h.value="Ürün verileri yüklenemedi."}}),(e,n)=>{const r=ee;return u(),m("div",null,[n[13]||(n[13]=a("h1",null,"Ürünler",-1)),x(r,null,{default:z(()=>[_.value?(u(),$(K,{key:0,showModal:_.value,title:"Ürünü Sil",message:"Bu ürünü silmek istediğinize emin misiniz?",onConfirm:W,onCancel:G},null,8,["showModal"])):c("",!0)]),_:1}),x(r,null,{default:z(()=>[y.value?(u(),$(K,{key:0,showModal:y.value,title:"Ürün stock degisikligi",message:"Bu ürünün stogunu degistirmek istediginize emin misiniz?",onConfirm:H,onCancel:J},null,8,["showModal"])):c("",!0)]),_:1}),a("div",ie,[n[7]||(n[7]=a("h3",null,"Yeni Ürün Ekle",-1)),k(a("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>l.value.ürün_numarasi=t),placeholder:"Ürün numarasi"},null,512),[[f,l.value.ürün_numarasi]]),k(a("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>l.value.ürün_ismi=t),placeholder:"Ürün ismi"},null,512),[[f,l.value.ürün_ismi]]),k(a("input",{"onUpdate:modelValue":n[2]||(n[2]=t=>l.value.ürün_fiyati=t),placeholder:"Ürün fiyati"},null,512),[[f,l.value.ürün_fiyati]]),k(a("input",{"onUpdate:modelValue":n[3]||(n[3]=t=>l.value.ürün_adedi=t),placeholder:"Ürün adedi"},null,512),[[f,l.value.ürün_adedi]]),a("button",{onClick:Q},"Ürün Ekle")]),p.value?(u(),m("p",oe,i(p.value),1)):c("",!0),n[14]||(n[14]=a("h3",null,"Ürün Listesi",-1)),k(a("input",{"onUpdate:modelValue":n[4]||(n[4]=t=>L.value=t),placeholder:"Ürün numarasi, Ürün Adı, Ürün fiyiti, kayit tarihi ara",onKeyup:n[5]||(n[5]=le((...t)=>e.submitSearch&&e.submitSearch(...t),["enter"])),class:"search-input"},null,544),[[f,L.value]]),a("table",null,[a("thead",null,[a("tr",null,[a("th",null,"Kayitli ürün listesi ("+i(o.value.length)+" kayitli ürün bulunmaktadır) - Filtrelenen ürün sayısı: "+i(V.value.length),1)])]),a("tbody",null,[(u(!0),m(U,null,se(I.value,(t,S)=>(u(),m(U,{key:S},[a("tr",{onClick:d=>A(t.ürün_numarasi)},[a("td",de,[a("div",ve,[a("span",me,i(w.value===t.ürün_numarasi?"↑":"↓"),1)]),a("span",ce,"Ürün numarasi: "+i(t.ürün_numarasi),1),a("span",_e,i(t.ürün_ismi),1),a("span",ke,"TL: "+i(t.ürün_fiyati),1),a("span",fe,"Stok: "+i(t.ürün_adedi),1),a("button",{class:"row-element row-element-last remove-button",onClick:re(d=>R(t.ürün_numarasi),["stop"])},"Ürünü Sil",8,ye)])],8,ue),w.value===t.ürün_numarasi?(u(),m("tr",ge,[a("td",he,[a("div",null,[a("p",null,[n[8]||(n[8]=a("strong",null,"Ürün Adı:",-1)),P(" "+i(t.ürün_ismi),1)]),a("p",null,[n[9]||(n[9]=a("strong",null,"Fiyat:",-1)),P(" "+i(t.ürün_fiyati)+" TL",1)]),a("p",null,[n[10]||(n[10]=a("strong",null,"Stok Miktarı:",-1)),P(" "+i(t.ürün_adedi),1)]),a("p",null,[n[11]||(n[11]=a("strong",null,"Kayıt Tarihi:",-1)),P(" "+i(t.ürün_kayit_tarihi),1)]),n[12]||(n[12]=a("span",null,"Ürün stogunu düzenle: ",-1)),a("div",pe,[k(a("input",{type:"number","onUpdate:modelValue":n[6]||(n[6]=d=>E.value=d),placeholder:"Miktar",min:"1",class:"stock-input"},null,512),[[f,E.value,void 0,{number:!0}]]),a("button",{onClick:d=>X(t.ürün_numarasi),class:"stock-button"},"Ürün stogunu artır",8,we),a("button",{onClick:d=>Z(t.ürün_numarasi),class:"stock-button"},"Ürün stogune azalt",8,Ce)])])])])):c("",!0)],64))),128))])]),a("div",be,[a("div",null,[Y.value?(u(),m("button",{key:0,onClick:O,class:"load-more-btn"}," Daha fazla ürün göster ")):c("",!0),j.value?(u(),m("button",{key:1,onClick:q,class:"load-less-btn"}," Daha az ürün göster ")):c("",!0)])]),x(r,null,{default:z(()=>[v.value?(u(),$(ne,{key:0,showModal:v.value,errorMessage:h.value,onClose:N},null,8,["showModal","errorMessage"])):c("",!0)]),_:1})])}}},Le=ae(Me,[["__scopeId","data-v-d7cc4fa9"]]);export{Le as default};
